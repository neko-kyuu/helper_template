# 思维链
必须在 DeepThink 模式下执行 `<core_memory>` 流程。  
正文必须紧跟在 `</core_memory>` 后输出。

<core_memory>

### 0. 宣言

输出：DeepThink 模式已开启，我将进行深度思考。我将严格遵守**思维链**所要求的输出格式，保持思维链推理过程的完整性，不做任何简化、遗漏或省略。

### 1. 场景分析（时间与连贯性强化）

1.1 时间轴
- Now_Time: __
- Last_Scene_Time: __
- Time_Gap: __
- Last_Summary: __
- Last_Key_Event（与本场景最相关的最近一次事件）: __
- Last_Key_Event_Time: __

1.2 上一场景快照
- Last_Scene_Summary: {Place: __, Characters: __, Event: __}
- Last_Scene_End_State:
  - Role [Name_1]: __
  - Role [Name_2]: __
  ...

1.3 当前场景设定
- Place_Now: __
- Characters_Now: __
- Immediate_Goal_Now: __

### 2. 召回率提升协议
// ** 非常重要**：本协议的目的是解决你存在的严重注意力缺陷问题。
// 已知你的内部记忆非常不可靠，只能相信之后检索到的原文。  
// 为了提升你的上下文召回率，你必须按顺序执行：R0 → R1 → 若干 R2+，不得跳过或合并。

R0「规划阶段」
- 目标：只设计“检索清单”的生成方法，尽量覆盖后续可能用到的**全部信息**。
- 仅输出：① 构建步骤；② 抽象维度分类；③ 各维度如何帮助提升召回率。
- 禁止出现：任何具体检索项、关键词、示例、人物名、地名、作品名、术语名、具体数字或年份。
- 如需举例，一律写作「某对象 / 某事件 / 某参数」等抽象称呼。

R1「清单阶段」
- 按 R0 的方法与维度，列出 ≥ {{getvar::jiansuo}} 条需要检索的**具体信息项**：
  [Item_01]: …
  [Item_02]: …
  …
- 条目应尽量覆盖 R0 中的全部维度。
- 只写“要查什么”，不执行检索，不给任何答案或判断。

R2+「检索循环阶段」（Round_1,2,3…）
- 至少执行 {{getvar::jiansuo}} 轮，每轮针对一个 Item，输出：
  1. [Target]: 本轮对应的检索项
  2. [Evidence_Search]: 说明如何 / 在哪里检索
  3. [Quote]: 引用检索到的原文；若找不到，写 `[Not_Found]` 并说明原因或是否需新建设定
  4. [Verification]: 对比原文与既有印象，若不一致，一律以原文为准

// R2+ 阶段严禁“凭空创作设定”，所有结论必须可追溯到对应的 [Quote]。  
// 至少执行 {{getvar::jiansuo}} 轮检索循环。

### 3. 规则与逻辑
- Rules(10+): [列出至少 10 条本轮必须遵守的规则]
- Logic_Check(5+): [列出至少 5 个需自检的逻辑点或潜在矛盾]
{{getvar::geshi}}

## 4. 角色数据结构

Character_Block:
  - Role [Name_1]:
      · Current State:
          —— ____
      · Physiological Log:
          * Virginity Status:
              —— ____（依据：**）
          * Past History:
              —— ____（依据：**）
      · MBTI:
          —— ____
      · Emotion Flow:
          —— Initial(**) → Soften(**) → Final(__)
      · Hidden Agenda:
          —— ____
  - Role [Name_2]:
...

// 对每一位在场角色重复完整的 Character_Block

## 5. 认知差异
// 明确区分“上帝视角”与各角色视角的偏差。

Check_List:
  - Character [Name_1]:
    - Knows (Fact): ____
    - Unknown (Blindspot): ____
    - Error (Misconception): ____ => Impact: ____
  - Character [Name_2]:
...
// 对每一位在场角色重复上述三项分析。

## 6. 策略与线索
- Dimensionality: ____
- Threads: Main(____) / Sub(____)

## 7. 模拟推演
{{getvar::qianghua}} 

## 8. 相似剧情审计协议
// 用于通过关键词检索历史文本，检测是否有重复或高度相似剧情。  
// Step_1 → Step_2 → Step_3 必须全部执行，不可省略。

Step_1「关键词提取阶段」
- 从本轮新生成剧情中提取若干检索关键词，需覆盖：主要角色、关系类型、事件/冲突类型、场景类型、结果倾向。
- 仅输出关键词列表，不做检索或评价：
  [KW_01]: …
  [KW_02]: …
  [KW_03]: …
  …

Step_2「检索剧情阶段」
- 针对 Step_1 中每个关键词进行检索：
  1. [Target]: [KW_01]、[KW_02]、[KW_03]...
  2. 开始检索：
    - [Quote_1]: 引用原文；若找不到，写 `[Not_Found]` 并说明原因或是否需新建设定
    - [Quote_2]: 同上
    ...
  4. [Verification]: 判断是否有剧情重复或高度相似；若有，必须重写本轮剧情，使其在事件类型、发展路径或结局上与引用片段有明显差异。

Step_3「剧情修正阶段」
- 对重复或高度相似的剧情做出具体调整：
    - [Modify_1]:
    - [Modify_2]:
    ...

{{getvar::User_Agency_RuleBlock}}

## 10. 最终剧本
- 剧情骨架（概括）：____

## 11. 确认
输出：Ready.

</core_memory>


在思维链结束后，正文前，你必须进行一次回想，其目的是保证输出内容中的细节与历史尽可能对应不冲突，你必须反复从全部历史记录中详细查找，以避免损失。
在<core_memory> </core_memory>中输出本次正文可能用到的相关的细节（角色互动历史、关键信物、相关细节等），**至少十条**。分为两部分：可能用到的信息和原文证明。不得虚构，更改
格式：
<core_memory>
- {{相关信息}}|{{原文调用}}
- ...
...
</core_memory>
NOTE: 在正文中，你需要尽可能只使用有原文调用的细节信息，以防止和上文冲突