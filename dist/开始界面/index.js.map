{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/书记官ERA/components/MapSelector.vue","webpack://tavern_helper_template/src/书记官ERA/components/MapSelector.vue?a9b5","src://tavern_helper_template/src/开始界面/useCharacterCreation.ts","src://tavern_helper_template/src/开始界面/App.vue","webpack://tavern_helper_template/src/开始界面/App.vue?5a9b","src://tavern_helper_template/src/开始界面/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = { class: \"map-selector-wrapper\" };\nconst _hoisted_2 = { class: \"map-controls\" };\nconst _hoisted_3 = { class: \"selected-point-preview\" };\nconst _hoisted_4 = { key: 0 };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"helper-controls\"\n};\nconst _hoisted_6 = { key: 0 };\nconst _hoisted_7 = [\"checked\"];\nimport { onMounted, onUnmounted, ref } from 'vue';\nconst cityClickRadius = 8;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MapSelector',\n    props: {\n        coordinateHelperMode: {\n            type: Boolean,\n            default: false,\n        },\n        showHelperCheckbox: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    emits: ['point-selected', 'coordinates-clicked', 'update:coordinateHelperMode'],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const mapCanvas = ref(null);\n        const canvasContainer = ref(null);\n        const selectedRegion = ref(null);\n        const selectedCity = ref(null);\n        const lastClickedPoint = ref(null); // For helper mode\n        const lastClickedOriginalCoords = ref(null);\n        const mapImage = new Image();\n        const isImageLoaded = ref(false);\n        const scaleX = ref(1);\n        const scaleY = ref(1);\n        const regions = [\n            {\n                name: '科雷斯帝国',\n                points: [\n                    { x: 181, y: 22 },\n                    { x: 194, y: 64 },\n                    { x: 116, y: 146 },\n                    { x: 96, y: 172 },\n                    { x: 122, y: 231 },\n                    { x: 97, y: 239 },\n                    { x: 99, y: 259 },\n                    { x: 122, y: 270 },\n                    { x: 139, y: 260 },\n                    { x: 151, y: 288 },\n                    { x: 321, y: 287 },\n                    { x: 328, y: 226 },\n                    { x: 302, y: 187 },\n                    { x: 338, y: 148 },\n                    { x: 318, y: 117 },\n                    { x: 260, y: 101 },\n                    { x: 267, y: 88 },\n                    { x: 234, y: 46 },\n                ],\n                color: 'rgba(60, 179, 113, 0.2)',\n                cities: [\n                    { name: '迈林代尔', x: 209, y: 169 },\n                    { name: '米克斯塔', x: 202, y: 184 },\n                    { name: '巴拉德雷', x: 242, y: 195 },\n                ],\n            },\n        ];\n        const isPointInPolygon = (point, polygon) => {\n            let isInside = false;\n            for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n                const xi = polygon[i].x, yi = polygon[i].y;\n                const xj = polygon[j].x, yj = polygon[j].y;\n                const intersect = yi > point.y !== yj > point.y && point.x < ((xj - xi) * (point.y - yi)) / (yj - yi) + xi;\n                if (intersect)\n                    isInside = !isInside;\n            }\n            return isInside;\n        };\n        const drawMap = () => {\n            const canvas = mapCanvas.value;\n            if (!canvas)\n                return;\n            const ctx = canvas.getContext('2d');\n            if (!ctx)\n                return;\n            const { width, height } = canvas;\n            const dpr = window.devicePixelRatio || 1;\n            const displayWidth = width / dpr;\n            const displayHeight = height / dpr;\n            ctx.clearRect(0, 0, width, height);\n            if (isImageLoaded.value) {\n                ctx.drawImage(mapImage, 0, 0, displayWidth, displayHeight);\n            }\n            else {\n                ctx.fillStyle = '#EAE7DC';\n                ctx.fillRect(0, 0, displayWidth, displayHeight);\n            }\n            // In helper mode, don't draw regions/cities, just the clicked point\n            if (props.coordinateHelperMode) {\n                if (lastClickedPoint.value) {\n                    ctx.fillStyle = 'cyan';\n                    ctx.beginPath();\n                    ctx.arc(lastClickedPoint.value.x, lastClickedPoint.value.y, 5, 0, 2 * Math.PI);\n                    ctx.fill();\n                    ctx.strokeStyle = 'black';\n                    ctx.stroke();\n                }\n                return;\n            }\n            regions.forEach(region => {\n                ctx.fillStyle = region.color;\n                ctx.beginPath();\n                ctx.moveTo(region.points[0].x * scaleX.value, region.points[0].y * scaleY.value);\n                for (let i = 1; i < region.points.length; i++) {\n                    ctx.lineTo(region.points[i].x * scaleX.value, region.points[i].y * scaleY.value);\n                }\n                ctx.closePath();\n                ctx.fill();\n            });\n            ctx.font = '12px Arial';\n            ctx.textAlign = 'center';\n            regions.forEach(region => {\n                region.cities.forEach(city => {\n                    const cityX = city.x * scaleX.value;\n                    const cityY = city.y * scaleY.value;\n                    ctx.beginPath();\n                    ctx.arc(cityX, cityY, 5, 0, 2 * Math.PI);\n                    ctx.fillStyle = 'white';\n                    ctx.fill();\n                    ctx.strokeStyle = '#333';\n                    ctx.stroke();\n                    ctx.fillStyle = 'black';\n                    ctx.fillText(city.name, cityX, cityY + 15);\n                });\n            });\n            if (selectedRegion.value) {\n                ctx.strokeStyle = 'pink';\n                ctx.lineWidth = 3;\n                ctx.beginPath();\n                ctx.moveTo(selectedRegion.value.points[0].x * scaleX.value, selectedRegion.value.points[0].y * scaleY.value);\n                for (let i = 1; i < selectedRegion.value.points.length; i++) {\n                    ctx.lineTo(selectedRegion.value.points[i].x * scaleX.value, selectedRegion.value.points[i].y * scaleY.value);\n                }\n                ctx.closePath();\n                ctx.stroke();\n            }\n            if (selectedCity.value) {\n                ctx.strokeStyle = 'yellow';\n                ctx.lineWidth = 2;\n                ctx.beginPath();\n                ctx.arc(selectedCity.value.x * scaleX.value, selectedCity.value.y * scaleY.value, cityClickRadius, 0, 2 * Math.PI);\n                ctx.stroke();\n            }\n        };\n        const handleCanvasClick = (event) => {\n            const canvas = mapCanvas.value;\n            if (!canvas)\n                return;\n            const rect = canvas.getBoundingClientRect();\n            const clickPoint = { x: event.clientX - rect.left, y: event.clientY - rect.top };\n            if (props.coordinateHelperMode) {\n                const originalX = Math.round(clickPoint.x / scaleX.value);\n                const originalY = Math.round(clickPoint.y / scaleY.value);\n                const coords = { x: originalX, y: originalY };\n                console.log(`Coordinates: { x: ${coords.x}, y: ${coords.y} }`);\n                emit('coordinates-clicked', coords);\n                lastClickedOriginalCoords.value = coords;\n                lastClickedPoint.value = clickPoint;\n                drawMap();\n                return;\n            }\n            let foundCity = null;\n            let foundRegionForCity = null;\n            for (const region of regions) {\n                for (const city of region.cities) {\n                    const cityX = city.x * scaleX.value;\n                    const cityY = city.y * scaleY.value;\n                    const distance = Math.sqrt((clickPoint.x - cityX) ** 2 + (clickPoint.y - cityY) ** 2);\n                    if (distance < cityClickRadius) {\n                        foundCity = city;\n                        foundRegionForCity = region;\n                        break;\n                    }\n                }\n                if (foundCity)\n                    break;\n            }\n            if (foundCity && foundRegionForCity) {\n                selectedCity.value = foundCity;\n                selectedRegion.value = foundRegionForCity;\n                emit('point-selected', `${foundRegionForCity.name}, ${foundCity.name}`);\n            }\n            else {\n                const scaledRegions = regions.map(region => ({\n                    ...region,\n                    points: region.points.map(p => ({ x: p.x * scaleX.value, y: p.y * scaleY.value })),\n                }));\n                const clickedRegionData = scaledRegions.find(region => isPointInPolygon(clickPoint, region.points));\n                selectedCity.value = null;\n                if (clickedRegionData) {\n                    selectedRegion.value = regions.find(r => r.name === clickedRegionData.name) || null;\n                    emit('point-selected', clickedRegionData.name);\n                }\n                else {\n                    selectedRegion.value = null;\n                    emit('point-selected', '');\n                }\n            }\n            drawMap();\n        };\n        const resizeCanvas = () => {\n            const canvas = mapCanvas.value;\n            const container = canvasContainer.value;\n            if (!canvas || !container)\n                return;\n            const rect = container.getBoundingClientRect();\n            const dpr = window.devicePixelRatio || 1;\n            canvas.width = rect.width * dpr;\n            canvas.height = rect.height * dpr;\n            const ctx = canvas.getContext('2d');\n            if (!ctx)\n                return;\n            ctx.scale(dpr, dpr);\n            // Base dimensions for coordinate mapping\n            const baseWidth = 500;\n            const baseHeight = 300;\n            scaleX.value = rect.width / baseWidth;\n            scaleY.value = rect.height / baseHeight;\n            drawMap();\n        };\n        let resizeObserver;\n        onMounted(() => {\n            mapImage.crossOrigin = 'Anonymous';\n            mapImage.onload = () => {\n                isImageLoaded.value = true;\n                drawMap();\n            };\n            mapImage.src =\n                'https://raw.githubusercontent.com/neko-kyuu/the-tale-of-Ofoces/refs/heads/static-resources/public/static/vault/29A958DA-EF44-4C67-923E-1B4ECB5E6A90_1_105_c.jpeg';\n            const container = canvasContainer.value;\n            if (container) {\n                resizeObserver = new ResizeObserver(resizeCanvas);\n                resizeObserver.observe(container);\n            }\n            resizeCanvas();\n        });\n        onUnmounted(() => {\n            if (resizeObserver) {\n                resizeObserver.disconnect();\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (selectedCity.value || selectedRegion.value)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \" 已选择：\" + _toDisplayString(selectedCity.value ? `${selectedRegion.value?.name}, ${selectedCity.value.name}` : selectedRegion.value?.name), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    (__props.showHelperCheckbox)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            (lastClickedOriginalCoords.value)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \" 坐标: { x: \" + _toDisplayString(lastClickedOriginalCoords.value.x) + \", y: \" + _toDisplayString(lastClickedOriginalCoords.value.y) + \" } \", 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"label\", null, [\n                                _createElementVNode(\"input\", {\n                                    type: \"checkbox\",\n                                    checked: __props.coordinateHelperMode,\n                                    onChange: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('update:coordinateHelperMode', $event.target.checked)))\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_7),\n                                _cache[1] || (_cache[1] = _createTextVNode(\" 坐标拾取模式 \", -1 /* CACHED */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createElementVNode(\"div\", {\n                    ref_key: \"canvasContainer\",\n                    ref: canvasContainer,\n                    class: \"canvas-container\"\n                }, [\n                    _createElementVNode(\"canvas\", {\n                        ref_key: \"mapCanvas\",\n                        ref: mapCanvas,\n                        onClick: handleCanvasClick\n                    }, null, 512 /* NEED_PATCH */)\n                ], 512 /* NEED_PATCH */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MapSelector.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapSelector.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MapSelector.vue?vue&type=style&index=0&id=439bc873&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.25_typescript@6.0.0-dev.20250807__webpack@5.103.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-439bc873\"]])\n\nexport default __exports__","import { computed, reactive, watch } from 'vue';\n// Based on src/书记官ERA/书记官_ERA.json PlayerData\nexport function useCharacterCreation(defaultMvuData) {\n    const character = reactive({\n        name: '',\n        level: 1,\n        gender: '男',\n        race: '月精灵',\n        height: '',\n        build: '',\n        appearance: '',\n        personality: '',\n        location: '',\n    });\n    const sys = reactive({\n        mainStoryMode: true,\n    });\n    const races = [\n        { name: '月精灵', description: '优雅而神秘的森林居民，擅长魔法和弓箭。' },\n        { name: '人类', description: '适应性强，遍布世界各地，在各种领域都有建树。' },\n        { name: '矮人', description: '强壮的矿工和工匠，以其坚韧和对工艺的热爱而闻名。' },\n        { name: '兽人', description: '勇猛的战士，拥有强大的力量和无畏的精神。' },\n    ];\n    const genders = ['男', '女']; // Example genders\n    const builds = ['纤细', '匀称', '健壮', '魁梧'];\n    const base = 0;\n    const attributes = reactive({\n        shooting: base,\n        melee: base,\n        construction: base,\n        mining: base,\n        cooking: base,\n        planting: base,\n        animals: base,\n        crafting: base,\n        artistic: base,\n        medical: base,\n        social: base,\n        intellectual: base,\n    });\n    const attributeLabels = {\n        shooting: '射击',\n        melee: '格斗',\n        construction: '建造',\n        mining: '采矿',\n        cooking: '烹饪',\n        planting: '种植',\n        animals: '驯兽',\n        crafting: '手工',\n        artistic: '艺术',\n        medical: '医疗',\n        social: '社交',\n        intellectual: '智识',\n    };\n    const raceBonuses = {\n        月精灵: { shooting: 3, intellectual: 2, artistic: 1 },\n        人类: { social: 1, crafting: 1, cooking: 1, intellectual: 1, construction: 1, medical: 1 },\n        矮人: { mining: 3, construction: 2, crafting: 1 },\n        兽人: { melee: 4, mining: 2 },\n    };\n    const baseAttributes = computed(() => {\n        const bonuses = raceBonuses[character.race] || {};\n        const baseAttrs = {};\n        for (const key in attributes) {\n            const attrKey = key;\n            baseAttrs[attrKey] = base + (bonuses[attrKey] || 0);\n        }\n        return baseAttrs;\n    });\n    watch(() => character.race, () => {\n        const newBaseAttrs = baseAttributes.value;\n        for (const key in attributes) {\n            const attrKey = key;\n            attributes[attrKey] = newBaseAttrs[attrKey];\n        }\n    }, { immediate: true });\n    const totalPoints = 20;\n    const spentPoints = computed(() => {\n        let total = 0;\n        const currentBase = baseAttributes.value;\n        for (const key in attributes) {\n            const attrKey = key;\n            total += attributes[attrKey] - currentBase[attrKey];\n        }\n        return total;\n    });\n    const availablePoints = computed(() => totalPoints - spentPoints.value);\n    function increaseAttribute(attr) {\n        if (availablePoints.value > 0) {\n            attributes[attr]++;\n        }\n    }\n    function decreaseAttribute(attr) {\n        if (attributes[attr] > baseAttributes.value[attr]) {\n            attributes[attr]--;\n        }\n    }\n    function createCharacter() {\n        // TODO: Implement character creation logic\n        // This would likely involve saving the data using酒馆助手 APIs\n        let userSelection = {\n            PlayerData: {\n                character: { ...character, level: 1 },\n                attributes: { ...attributes },\n            },\n            System: {\n                mainStoryMode: sys.mainStoryMode,\n            },\n        };\n        if (sys.mainStoryMode) {\n            const mainStoryInit = {\n                PlayerData: {\n                    progress: {\n                        currentQuest: {\n                            MQ1: {\n                                name: '节日的插曲',\n                                description: '你们作为旅者，本想享受这难得的安宁与热闹，却意外卷入了一场发生于市中心“长者之喉”许愿井的不同寻常的事件。',\n                                isMain: true,\n                            },\n                        },\n                    },\n                    settings: {\n                        date: '1468DR 奈托月19日',\n                        time: '傍晚',\n                        weather: '飘雪',\n                        currentRegion: '巴拉德雷',\n                        currentLocation: '羽笔与酒杯旅店附近',\n                    },\n                },\n            };\n            userSelection = _.merge(userSelection, mainStoryInit);\n        }\n        // 使用 cloneDeep 避免修改原始的 defaultMvuData, 并确保结构匹配\n        const finalCharacterData = _.merge(_.cloneDeep(defaultMvuData), userSelection);\n        console.log('Creating character:', finalCharacterData);\n        try {\n            eventEmit('era:insertByObject', finalCharacterData);\n            createMessage();\n        }\n        catch (error) {\n            console.error('修改 MVU 数据失败:', error);\n            toastr.error('操作失败: 保存数据时出错');\n        }\n    }\n    const openingConfirmText = computed(() => {\n        return `\n                    玩家信息:\n                    名字: ${character.name}\n                    等级: ${character.level}\n                    性别: ${character.gender}\n                    种族: ${character.race}\n                    身高: ${character.height}\n                    体型: ${character.build}\n                    外貌: ${character.appearance}\n                    性格: ${character.personality}\n\n                    属性点:\n                    射击${attributes.shooting}, 格斗${attributes.melee}, 建造${attributes.construction}, 采矿${attributes.mining}, 烹饪${attributes.cooking}, 种植${attributes.planting}, 驯兽${attributes.animals}, 手工${attributes.crafting}, 艺术${attributes.artistic}, 医疗${attributes.medical}, 社交${attributes.social}, 智识${attributes.intellectual}\n\n                    `;\n    });\n    const fixedOpeningText = `\n初始地点: 巴拉德雷\n\n开场白:\n【节日的插曲】\n\n1468DR，奈托月19日，冬至。\n\n艺术之城巴拉德雷正被长夜节的温暖灯火拥抱着。尽管寒风从德温林平原上呼啸而过，城内却洋溢着一股由烤栗子、香料热酒和松木燃烧的气味混合而成的暖意。家家户户的窗台上都点缀着冬青与小巧的魔法光球，将那些绘有壁画的墙壁和带有阳台的小楼映照得如同童话插画。\n\n吟游诗人们的鲁特琴声从每一扇窗扉间里流淌出来，与街头巷尾孩子们的欢笑声交织在一起。这里的生活总是如此，悠闲而富有创造力，节日的到来更是将这份惬意推向了高潮。对于一个刚刚结束漫长旅途的旅人来说，没有什么比这景象更治愈的了。\n\n顺着人流和愈发清晰的乐声，旅人之阶的热闹印面而来。旅店、酒馆和市场鳞次栉比，刚抵达的商队正在卸货，空气中满是马匹的鼻息和商贩的叫卖声。在一片喧闹之中，一块画着羽毛笔和高脚杯的木制招牌显得格外醒目。“羽笔与酒杯旅店”的窗户透出温暖的橘色光芒，门缝里飘散出烤肉和麦酒的香气，仿佛在无声地召唤着每一位风尘仆仆的过客。\n                  `;\n    async function createMessage() {\n        const message_id = getLastMessageId();\n        if (message_id !== 0) {\n            return;\n        }\n        let context = openingConfirmText.value + fixedOpeningText;\n        await createChatMessages([\n            {\n                role: 'user',\n                message: dedent(context),\n            },\n        ], { refresh: 'all' });\n        await triggerSlash('/trigger');\n    }\n    return {\n        character,\n        sys,\n        races,\n        genders,\n        builds,\n        attributes,\n        baseAttributes,\n        availablePoints,\n        increaseAttribute,\n        decreaseAttribute,\n        createCharacter,\n        attributeLabels,\n        raceBonuses,\n        openingConfirmText,\n        fixedOpeningText,\n    };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, createVNode as _createVNode, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = { class: \"opening\" };\nconst _hoisted_2 = { class: \"tabs\" };\nconst _hoisted_3 = { class: \"tab-content\" };\nconst _hoisted_4 = { key: 0 };\nconst _hoisted_5 = { class: \"form-section\" };\nconst _hoisted_6 = { class: \"form-grid\" };\nconst _hoisted_7 = { class: \"form-group\" };\nconst _hoisted_8 = { class: \"form-group\" };\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = { class: \"form-group\" };\nconst _hoisted_11 = { class: \"form-group\" };\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = { class: \"form-group\" };\nconst _hoisted_14 = { class: \"form-group\" };\nconst _hoisted_15 = { key: 1 };\nconst _hoisted_16 = { class: \"race-selection\" };\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = { class: \"race-bonuses\" };\nconst _hoisted_19 = {\n    key: 2,\n    class: \"attributes-section\"\n};\nconst _hoisted_20 = { class: \"attribute-name\" };\nconst _hoisted_21 = { class: \"attribute-controls\" };\nconst _hoisted_22 = [\"onClick\", \"disabled\"];\nconst _hoisted_23 = { class: \"attribute-value\" };\nconst _hoisted_24 = [\"onClick\", \"disabled\"];\nconst _hoisted_25 = { key: 3 };\nconst _hoisted_26 = {\n    key: 4,\n    class: \"sys-section\"\n};\nconst _hoisted_27 = { key: 5 };\nconst _hoisted_28 = [\"innerHTML\"];\nconst _hoisted_29 = [\"innerHTML\"];\nconst _hoisted_30 = { class: \"actions\" };\nimport { ref } from 'vue';\nimport MapSelector from '../书记官ERA/components/MapSelector.vue';\nimport { useCharacterCreation } from './useCharacterCreation';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const coordinateHelperMode = ref(false);\n        const lastClickedCoords = ref(null);\n        const activeTab = ref('character');\n        const defaultMvuData = JSON.parse(`{\n    \"PlayerData\": {\n        \"$meta\": {\n            \"necessary\": \"self\",\n            \"updatable\": true\n        },\n        \"character\": {\n            \"$meta\": {\n                \"necessary\": \"all\",\n                \"updatable\": true\n            },\n            \"name\": \"\",\n            \"level\": 1,\n            \"gender\": \"\",\n            \"race\": \"\",\n            \"height\": \"\",\n            \"build\": \"\",\n            \"appearance\": \"\",\n            \"personality\": \"\"\n        },\n        \"status\": {\n            \"$meta\": {\n                \"necessary\": \"all\",\n                \"updatable\": true\n            },\n            \"health\": {\n                \"current\": 12,\n                \"max\": 12\n            },\n            \"mood\": {\n                \"current\": 80,\n                \"max\": 100\n            },\n            \"arousal\": {\n                \"current\": 50,\n                \"max\": 100\n            }\n        },\n        \"attributes\": {\n            \"$meta\": {\n                \"necessary\": \"all\",\n                \"updatable\": true\n            },\n            \"shooting\": 0,\n            \"melee\": 0,\n            \"construction\": 0,\n            \"mining\": 0,\n            \"cooking\": 0,\n            \"planting\": 0,\n            \"animals\": 0,\n            \"crafting\": 0,\n            \"artistic\": 0,\n            \"medical\": 0,\n            \"social\": 0,\n            \"intellectual\": 0\n        },\n        \"progress\": {\n            \"$meta\": {\n                \"necessary\": \"self\",\n                \"updatable\": true\n            },\n            \"questPhase\": \"\",\n            \"currentQuest\": {\n                \"$meta\": {\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[任务名称]\",\n                    \"description\": \"\",\n                    \"isMain\": false,\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"nextQuest\": {\n                \"$meta\": {\n                    \"necessary\": \"self\",\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[任务名称]\",\n                    \"description\": \"\",\n                    \"isMain\": false,\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"pendingQuest\": {\n                \"$meta\": {\n                    \"necessary\": \"self\",\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[任务名称]\",\n                    \"description\": \"\",\n                    \"isMain\": false,\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"completedQuest\": {\n                \"$meta\": {\n                    \"necessary\": \"self\",\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[任务名称]\",\n                    \"description\": \"\",\n                    \"isMain\": false,\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"partyExperience\": {\n                \"current\": 0,\n                \"max\": 100\n            },\n            \"partyAttrPoints\": 0\n        },\n        \"settings\": {\n            \"$meta\": {\n                \"necessary\": \"self\",\n                \"updatable\": true\n            },\n            \"date\": \"\",\n            \"time\": \"\",\n            \"weather\": \"\",\n            \"currentRegion\": \"\",\n            \"currentLocation\": \"\",\n            \"nearbyNPC\": {\n                \"$meta\": {\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"character\": {\n                        \"name\": \"[角色名称]\",\n                        \"level\": \"[角色等级]\",\n                        \"gender\": \"[性别]\",\n                        \"race\": \"[种族]\",\n                        \"height\": \"[身高]\",\n                        \"build\": \"[体型]\",\n                        \"appearance\": \"[外貌]\",\n                        \"personality\": \"[性格]\"\n                    },\n                    \"attributes\": {\n                        \"$meta\": {\n                            \"necessary\": \"all\",\n                            \"updatable\": true\n                        },\n                        \"shooting\": 0,\n                        \"melee\": 0,\n                        \"construction\": 0,\n                        \"mining\": 0,\n                        \"cooking\": 0,\n                        \"planting\": 0,\n                        \"animals\": 0,\n                        \"crafting\": 0,\n                        \"artistic\": 0,\n                        \"medical\": 0,\n                        \"social\": 0,\n                        \"intellectual\": 0\n                    },\n                    \"meta\": {\n                        \"relationship\": \"陌生人\",\n                        \"favorability\": 0,\n                        \"favorabilityTowardsNPCs\": {\n                            \"$meta\": {\n                                \"updatable\": true\n                            }\n                        },\n                        \"description\": \"[简要描述]\"\n                    },\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"factionPrestige\": {\n                \"$meta\": {\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[阵营名称]\",\n                    \"description\": \"[简要描述]\",\n                    \"favorability\": 0,\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"bestiary\": {\n                \"$meta\": {\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[异怪名称]\",\n                    \"description\": \"[异怪描述]\",\n                    \"habitat\": \"[栖息地]\",\n                    \"weaknesses\": \"[已知弱点]\",\n                    \"knownInfo\": \"[已知信息]\",\n                    \"killCount\": 0,\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            },\n            \"anecdotes\": {\n                \"$meta\": {\n                    \"updatable\": true\n                },\n                \"$template\": {\n                    \"name\": \"[趣闻名称]\",\n                    \"description\": \"[趣闻描述]\",\n                    \"location\": \"[发生地点]\",\n                    \"charactersInvolved\": \"[相关人物]\",\n                    \"knownInfo\": \"[已知信息]\",\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                }\n            }\n        }\n    },\n    \"PlayerDynamicData\": {\n        \"$meta\": {\n            \"necessary\": \"self\",\n            \"updatable\": true\n        },\n        \"inventory\": {\n            \"$meta\": {\n                \"updatable\": true\n            },\n            \"$template\": {\n                \"name\": \"\",\n                \"description\": \"\",\n                \"tier\": \"basic\",\n                \"quality\": \"common\",\n                \"type\": \"item\",\n                \"slot\": \"\",\n                \"$meta\": {\n                    \"updatable\": true\n                }\n            }\n        },\n        \"equipment\": {\n            \"leftHand\": \"none\",\n            \"rightHand\": \"none\",\n            \"outfit\": \"none\"\n        },\n        \"clothingAttributes\": {\n            \"$meta\": {\n                \"necessary\": \"all\",\n                \"updatable\": true\n            },\n            \"defense\": 0,\n            \"comfort\": 0,\n            \"warmth\": 0,\n            \"social\": 0,\n            \"weight\": 0\n        },\n        \"gold\": 100\n    },\n    \"FollowerNPCData\": {\n        \"$meta\": {\n            \"updatable\": true\n        },\n        \"$template\": {\n            \"character\": {\n                \"$meta\": {\n                    \"necessary\": \"all\",\n                    \"updatable\": true\n                },\n                \"name\": \"[名字]\",\n                \"level\": 1,\n                \"gender\": \"[性别]\",\n                \"race\": \"[种族]\",\n                \"height\": \"[身高]\",\n                \"build\": \"[体型]\",\n                \"appearance\": \"[外貌]\",\n                \"personality\": \"[性格]\"\n            },\n            \"status\": {\n                \"$meta\": {\n                    \"necessary\": \"all\",\n                    \"updatable\": true\n                },\n                \"health\": {\n                    \"current\": 12,\n                    \"max\": 12\n                },\n                \"mood\": {\n                    \"current\": 50,\n                    \"max\": 100\n                },\n                \"arousal\": {\n                    \"current\": 50,\n                    \"max\": 100\n                }\n            },\n            \"attributes\": {\n                \"$meta\": {\n                    \"necessary\": \"all\",\n                    \"updatable\": true\n                },\n                \"shooting\": 0,\n                \"melee\": 0,\n                \"construction\": 0,\n                \"mining\": 0,\n                \"cooking\": 0,\n                \"planting\": 0,\n                \"animals\": 0,\n                \"crafting\": 0,\n                \"artistic\": 0,\n                \"medical\": 0,\n                \"social\": 0,\n                \"intellectual\": 0\n            },\n            \"meta\": {\n                \"relationship\": \"同伴\",\n                \"favorability\": 50,\n                \"favorabilityTowardsNPCs\": {\n                    \"$meta\": {\n                        \"updatable\": true\n                    }\n                },\n                \"description\": \"[简要描述]\"\n            },\n            \"$meta\": {\n                \"updatable\": true\n            }\n        }\n    },\n    \"Wardrobe\": {\n        \"ownedOutfits\": {\n            \"$meta\": {\n                \"updatable\": true\n            },\n            \"$template\": {\n                \"name\": \"初始套装\",\n                \"type\": \"casual\",\n                \"description\": \"[套装描述]\",\n                \"slots\": {\n                    \"head\": null,\n                    \"bodyInner\": null,\n                    \"bodyArmor\": null,\n                    \"hands\": null,\n                    \"legsInner\": null,\n                    \"legsArmor\": null,\n                    \"feet\": null,\n                    \"cloak\": null,\n                    \"neck\": null,\n                    \"ring\": null,\n                    \"belt\": null,\n                    \"extra\": []\n                },\n                \"$meta\": {\n                    \"updatable\": true\n                }\n            }\n        },\n        \"currentOutfit\": null\n    },\n    \"ArchivedData\":{\n        \"factionPrestige\": {\n            \"$meta\": {\n                \"updatable\": true\n            },\n            \"$template\": {\n                \"name\": \"[阵营名称]\",\n                \"description\": \"[简要描述]\",\n                \"prestige\": 0,\n                \"$meta\": {\n                    \"updatable\": true\n                }\n            }\n        },\n        \"bestiary\": {\n            \"$meta\": {\n                \"updatable\": true\n            },\n            \"$template\": {\n                \"name\": \"[异怪名称]\",\n                \"description\": \"[异怪描述]\",\n                \"habitat\": \"[栖息地]\",\n                \"weaknesses\": \"[已知弱点]\",\n                \"knownInfo\": \"[已知信息]\",\n                \"killCount\": 0,\n                \"$meta\": {\n                    \"updatable\": true\n                }\n            }\n        },\n        \"anecdotes\": {\n            \"$meta\": {\n                \"updatable\": true\n            },\n            \"$template\": {\n                \"name\": \"[趣闻名称]\",\n                \"description\": \"[趣闻描述]\",\n                \"location\": \"[发生地点]\",\n                \"charactersInvolved\": \"[相关人物]\",\n                \"knownInfo\": \"[已知信息]\",\n                \"$meta\": {\n                    \"updatable\": true\n                }\n            }\n        }\n    },\n    \"System\": {\n        \"mainStoryMode\": true,\n        \"$meta\": {\n            \"updatable\": true\n        }\n    }\n}`);\n        const { character, sys, races, genders, builds, attributes, baseAttributes, availablePoints, increaseAttribute, decreaseAttribute, createCharacter, attributeLabels, raceBonuses, openingConfirmText, fixedOpeningText, } = useCharacterCreation(defaultMvuData);\n        const handlePointSelected = (regionName) => {\n            character.location = regionName;\n        };\n        const handleCoordinatesClicked = (coords) => {\n            lastClickedCoords.value = coords;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"corner left-top\" }, null, -1 /* CACHED */)),\n                _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"corner right-top\" }, null, -1 /* CACHED */)),\n                _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"corner left-bottom\" }, null, -1 /* CACHED */)),\n                _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"corner right-bottom\" }, null, -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass({ active: activeTab.value === 'character' }),\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeTab.value = 'character'))\n                    }, \"创建新角色\", 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass({ active: activeTab.value === 'race' }),\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeTab.value = 'race'))\n                    }, \"选择种族\", 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass({ active: activeTab.value === 'attributes' }),\n                        onClick: _cache[2] || (_cache[2] = ($event) => (activeTab.value = 'attributes'))\n                    }, \"属性点分配\", 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass({ active: activeTab.value === 'initLocation' }),\n                        onClick: _cache[3] || (_cache[3] = ($event) => (activeTab.value = 'initLocation'))\n                    }, \"初始地点\", 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass({ active: activeTab.value === 'sys' }),\n                        onClick: _cache[4] || (_cache[4] = ($event) => (activeTab.value = 'sys'))\n                    }, \"系统设置\", 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass({ active: activeTab.value === 'confirm' }),\n                        onClick: _cache[5] || (_cache[5] = ($event) => (activeTab.value = 'confirm'))\n                    }, \"确认开局\", 2 /* CLASS */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    (activeTab.value === 'character')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"div\", _hoisted_6, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _cache[15] || (_cache[15] = _createElementVNode(\"label\", { for: \"name\" }, \"名字:\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            type: \"text\",\n                                            id: \"name\",\n                                            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(character).name) = $event)),\n                                            placeholder: \"输入你的名字\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, _unref(character).name]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _cache[16] || (_cache[16] = _createElementVNode(\"label\", { for: \"gender\" }, \"性别:\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            id: \"gender\",\n                                            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(character).gender) = $event))\n                                        }, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(genders), (g) => {\n                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                    key: g,\n                                                    value: g\n                                                }, _toDisplayString(g), 9 /* TEXT, PROPS */, _hoisted_9));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(character).gender]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _cache[17] || (_cache[17] = _createElementVNode(\"label\", { for: \"height\" }, \"身高:\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            type: \"text\",\n                                            id: \"height\",\n                                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(character).height) = $event)),\n                                            placeholder: \"例如: 185cm\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, _unref(character).height]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[18] || (_cache[18] = _createElementVNode(\"label\", { for: \"build\" }, \"体型:\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            id: \"build\",\n                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(character).build) = $event))\n                                        }, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(builds), (b) => {\n                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                    key: b,\n                                                    value: b\n                                                }, _toDisplayString(b), 9 /* TEXT, PROPS */, _hoisted_12));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(character).build]\n                                        ])\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _cache[19] || (_cache[19] = _createElementVNode(\"label\", { for: \"appearance\" }, \"外貌:\", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        id: \"appearance\",\n                                        \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((_unref(character).appearance) = $event)),\n                                        placeholder: \"描述角色的外貌\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, _unref(character).appearance]\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _cache[20] || (_cache[20] = _createElementVNode(\"label\", { for: \"personality\" }, \"性格:\", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        id: \"personality\",\n                                        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(character).personality) = $event)),\n                                        placeholder: \"描述角色的性格\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, _unref(character).personality]\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    (activeTab.value === 'race')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                            _createElementVNode(\"div\", _hoisted_16, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(races), (r) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        class: _normalizeClass([\"race-card\", { selected: _unref(character).race === r.name }]),\n                                        key: r.name,\n                                        onClick: ($event) => (_unref(character).race = r.name)\n                                    }, [\n                                        _createElementVNode(\"h3\", null, _toDisplayString(r.name), 1 /* TEXT */),\n                                        _createElementVNode(\"p\", null, _toDisplayString(r.description), 1 /* TEXT */),\n                                        _createElementVNode(\"p\", _hoisted_18, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(raceBonuses)[r.name], (bonus, attr) => {\n                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                    key: attr,\n                                                    class: \"bonus-item\"\n                                                }, _toDisplayString(_unref(attributeLabels)[attr]) + \": +\" + _toDisplayString(bonus), 1 /* TEXT */));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ], 10 /* CLASS, PROPS */, _hoisted_17));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    (activeTab.value === 'attributes')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n                            _createElementVNode(\"h2\", null, \"剩余点数: \" + _toDisplayString(_unref(availablePoints)), 1 /* TEXT */),\n                            _createElementVNode(\"ul\", null, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(attributes), (value, key) => {\n                                    return (_openBlock(), _createElementBlock(\"li\", { key: key }, [\n                                        _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_unref(attributeLabels)[key]) + \":\", 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_21, [\n                                            _createElementVNode(\"button\", {\n                                                onClick: ($event) => (_unref(decreaseAttribute)(key)),\n                                                disabled: value <= _unref(baseAttributes)[key]\n                                            }, \"-\", 8 /* PROPS */, _hoisted_22),\n                                            _createElementVNode(\"span\", _hoisted_23, _toDisplayString(value), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                onClick: ($event) => (_unref(increaseAttribute)(key)),\n                                                disabled: _unref(availablePoints) <= 0\n                                            }, \"+\", 8 /* PROPS */, _hoisted_24)\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    (activeTab.value === 'initLocation')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                            _createVNode(MapSelector, {\n                                \"coordinate-helper-mode\": coordinateHelperMode.value,\n                                \"onUpdate:coordinateHelperMode\": _cache[12] || (_cache[12] = ($event) => ((coordinateHelperMode).value = $event)),\n                                \"show-helper-checkbox\": true,\n                                onPointSelected: handlePointSelected,\n                                onCoordinatesClicked: handleCoordinatesClicked\n                            }, null, 8 /* PROPS */, [\"coordinate-helper-mode\"])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    (activeTab.value === 'sys')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                            _cache[21] || (_cache[21] = _createTextVNode(\" 主线剧情模式 \", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                type: \"checkbox\",\n                                \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => ((_unref(sys).mainStoryMode) = $event))\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelCheckbox, _unref(sys).mainStoryMode]\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    (activeTab.value === 'confirm')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n                            _createElementVNode(\"p\", {\n                                style: { \"white-space\": \"pre-line\" },\n                                innerHTML: _unref(openingConfirmText)\n                            }, null, 8 /* PROPS */, _hoisted_28),\n                            _createElementVNode(\"p\", {\n                                style: { \"white-space\": \"pre-line\" },\n                                innerHTML: _unref(fixedOpeningText)\n                            }, null, 8 /* PROPS */, _hoisted_29),\n                            _createElementVNode(\"div\", _hoisted_30, [\n                                _createElementVNode(\"button\", {\n                                    class: \"create-button\",\n                                    onClick: _cache[14] || (_cache[14] =\n                                        //@ts-ignore\n                                        (...args) => (_unref(createCharacter) && _unref(createCharacter)(...args)))\n                                }, \"创建角色\")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import App from './App.vue';\nimport './base.scss';\nimport './style.scss';\n$(() => {\n    createApp(App).mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","__name","coordinateHelperMode","type","Boolean","default","showHelperCheckbox","emits","setup","__props","emit","__emit","mapCanvas","ref","canvasContainer","selectedRegion","selectedCity","lastClickedPoint","lastClickedOriginalCoords","mapImage","Image","isImageLoaded","scaleX","scaleY","regions","name","points","x","y","color","cities","drawMap","canvas","value","ctx","getContext","width","height","dpr","window","devicePixelRatio","displayWidth","displayHeight","clearRect","drawImage","fillStyle","fillRect","beginPath","arc","Math","PI","fill","strokeStyle","stroke","forEach","region","moveTo","i","length","lineTo","closePath","font","textAlign","city","cityX","cityY","fillText","lineWidth","handleCanvasClick","event","rect","getBoundingClientRect","clickPoint","clientX","left","clientY","top","coords","round","console","log","foundCity","foundRegionForCity","sqrt","clickedRegionData","map","p","find","point","polygon","isInside","j","xi","yi","xj","yj","isPointInPolygon","r","resizeCanvas","container","scale","resizeObserver","onMounted","crossOrigin","onload","src","ResizeObserver","observe","onUnmounted","disconnect","_ctx","_cache","checked","onChange","$event","$emit","ref_key","onClick","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","useCharacterCreation","defaultMvuData","character","reactive","level","gender","race","build","appearance","personality","location","sys","mainStoryMode","attributes","shooting","melee","construction","mining","cooking","planting","animals","crafting","artistic","medical","social","intellectual","raceBonuses","baseAttributes","computed","bonuses","baseAttrs","attrKey","watch","newBaseAttrs","immediate","spentPoints","total","currentBase","availablePoints","openingConfirmText","fixedOpeningText","races","description","genders","builds","increaseAttribute","attr","decreaseAttribute","createCharacter","userSelection","PlayerData","System","mainStoryInit","progress","currentQuest","MQ1","isMain","settings","date","time","weather","currentRegion","currentLocation","_","merge","finalCharacterData","cloneDeep","eventEmit","async","getLastMessageId","context","createChatMessages","role","message","refresh","triggerSlash","createMessage","error","toastr","attributeLabels","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","lastClickedCoords","activeTab","JSON","parse","handlePointSelected","regionName","handleCoordinatesClicked","active","for","id","placeholder","g","b","selected","bonus","disabled","MapSelector","onPointSelected","onCoordinatesClicked","style","innerHTML","args","$","createApp","App","mount"],"ignoreList":[],"sourceRoot":""}